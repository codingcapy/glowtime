import{u as h,k as f,g as u,l as w,j as e,L as v}from"./index-CmFC7z-S.js";import{u as y,c as j}from"./client-DafmfsAJ.js";function b(a){return{...a,createdAt:new Date(a.createdAt)}}async function N(a){const o=await j.api.v0.users.$post({json:a});if(!o.ok){let n="There was an issue creating your account :( We'll look into it ASAP!";try{const r=await o.json();r&&typeof r=="object"&&"message"in r&&(n=String(r.message))}catch(r){console.error("Failed to parse error response:",r)}throw new Error(n)}const t=await o.json();if(!t.user)throw new Error("Invalid response from server");return b(t.user)}const S=a=>{const o=h();return y({mutationFn:N,onSettled:t=>{if(!t)return console.log(t,"create args, returning");o.invalidateQueries({queryKey:["users"]})},onError:t=>{}})};function L(){const a=f(),[o,t]=u.useState(""),{mutate:n}=S(),[r,i]=u.useState(""),{loginService:m,authLoading:x,user:d}=w(s=>s);u.useEffect(()=>{d&&a({to:"/dashboard"})},[d]);function p(s){s.preventDefault();const c=s.target.email.value,l=s.target.password.value;if(c.length>255)return i("Email too long!");if(l.length>80)return i("Password too long! Max character limit is 80");n({email:c,password:l},{onSuccess:()=>{m(c,l),x&&t("Loading...")},onError:g=>i(g.toString())})}return e.jsx("main",{className:"flex-1",children:e.jsx("div",{className:"relative bg-gradient-to-b from-cyan-600 to-[#202020] w-[320px] md:w-[500px] mx-auto h-[80vh]",children:e.jsxs("div",{className:"bg-[#202020] absolute top-0 left-[2px] w-[316px] md:w-[496px] h-[80vh]",children:[e.jsx("h1",{className:" relative z-2 pt-20 pb-10 text-center text-4xl md:text-6xl font-bold",children:"Sign Up"}),e.jsxs("form",{onSubmit:p,className:"relative z-2 flex flex-col mx-auto",children:[e.jsx("input",{type:"email",placeholder:"Email",className:"mx-auto border p-2 my-2 md:w-[300px]",id:"email",name:"email",required:!0}),e.jsx("input",{type:"password",placeholder:"Password",className:"mx-auto border p-2 my-2 md:w-[300px]",id:"password",name:"password",required:!0}),e.jsx("button",{className:"py-3 px-5 my-5 rounded font-bold tracking-widest bg-cyan-600 w-[200px] md:w-[300px] mx-auto cursor-pointer hover:bg-cyan-300 hover:text-[#202020] transition-all ease-in-out duration-300",children:"SIGNUP"}),e.jsxs("div",{className:"mx-auto",children:["Already have an account?"," ",e.jsx(v,{to:"/login",className:"font-bold hover:text-cyan-300 transition-all ease-in-out duration-300",children:"Login"})]})]}),e.jsx("div",{className:"text-red-400 text-center",children:r}),e.jsx("div",{className:"text-center",children:o})]})})})}export{L as component};
